

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Functionality &#8212; CARTA 1.0 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Appendix A: uninstallation" href="appendix_a_uninstallation.html" />
    <link rel="prev" title="Graphical user interface" href="about_gui.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="appendix_a_uninstallation.html" title="Appendix A: uninstallation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="about_gui.html" title="Graphical user interface"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CARTA 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/carta_logo_v2.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Functionality</a><ul>
<li><a class="reference internal" href="#file-browser">File browser</a></li>
<li><a class="reference internal" href="#image-viewer">Image viewer</a><ul>
<li><a class="reference internal" href="#image-resolutions-and-screen-resolutions">Image resolutions and screen resolutions</a></li>
<li><a class="reference internal" href="#render-configuration-of-a-raster-image">Render configuration of a raster image</a></li>
<li><a class="reference internal" href="#carta-image-viewing-performance">CARTA image viewing performance</a></li>
<li><a class="reference internal" href="#changing-image-view">Changing image view</a></li>
<li><a class="reference internal" href="#cursor-information">Cursor information</a></li>
<li><a class="reference internal" href="#configuring-an-image-plot">Configuring an image plot</a></li>
</ul>
</li>
<li><a class="reference internal" href="#animator">Animator</a></li>
<li><a class="reference internal" href="#spatial-profiler">Spatial profiler</a></li>
<li><a class="reference internal" href="#spectral-profiler">Spectral profiler</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="about_gui.html"
                        title="previous chapter">Graphical user interface</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="appendix_a_uninstallation.html"
                        title="next chapter">Appendix A: uninstallation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/functionalities_gui.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="functionality">
<h1>Functionality<a class="headerlink" href="#functionality" title="Permalink to this headline">¶</a></h1>
<p>With version 1.0, CARTA provides basic image viewing capabilities, basic profile viewing capabilities in both spatial and spectral domains, and basic per-frame or per-cube histogram viewing capabilities. Exporting images or charts in png format and charts in plain text format are supported.</p>
<div class="section" id="file-browser">
<h2>File browser<a class="headerlink" href="#file-browser" title="Permalink to this headline">¶</a></h2>
<p>File browser, accessible via the menu <strong>File</strong> -&gt; <strong>Open image</strong> or the menu <strong>File</strong> -&gt; <strong>Append image</strong>, provides information of images supported by CARTA. Currently CARTA supports images in:</p>
<ul class="simple">
<li>CASA format</li>
<li>HDF5-IDIA format</li>
<li>FITS format</li>
<li>MIRIAD format</li>
</ul>
<p>Only these formats will be shown in the file list with image type and file size. When an image is selected, a brief summary of image properties is provided on the right side of the dialog. Full header is also available in the second tab. To view an image, click the <strong>Load</strong> button at the bottom-right corner. To view a new image with all the loaded images closed, use <strong>File</strong> -&gt; <strong>Open image</strong> -&gt; <strong>Load</strong>. To view multiple images, use <strong>File</strong> -&gt; <strong>Append image</strong> -&gt; <strong>Append</strong>.</p>
<img src="_static/carta_fn_fileBrowser.png"
     style="width:100%;height:auto;"><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When viewing images in appending mode, alignments in the world coordinate system (WCS) and the frequency/velocity space are not available in this version. This feature is expected in v1.2.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When the file information of an image cube with a <em>per-plane-beam</em> is requested, CARTA will spend a significant amount of time to calculate the beam information. This also applies when opening images with a per-plane-beam. This is a known issue and the developement team will try to solve it as soon as possible.</p>
</div>
</div>
<div class="section" id="image-viewer">
<h2>Image viewer<a class="headerlink" href="#image-viewer" title="Permalink to this headline">¶</a></h2>
<p>When an image is loaded via the file browser, it is shown in the image viewer with its per-frame histogram shown in the render configuration widget. Currently CARTA supports raster image only.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Contour rendering will be available in v1.2.</p>
</div>
<p>The aspect ratio of the image view is determined by the panel geometry. When the image viewer panel is resized, a tip with a ratio in screen pixel will be displayed (c.f., <a class="reference internal" href="about_gui.html#resizing-a-panel"><span class="std std-ref">Resizing a panel</span></a> ).</p>
<div class="section" id="image-resolutions-and-screen-resolutions">
<h3>Image resolutions and screen resolutions<a class="headerlink" href="#image-resolutions-and-screen-resolutions" title="Permalink to this headline">¶</a></h3>
<p>In CARTA, the resolution of an image displayed in the image viewer is <em>dynamically</em> determined by the screen resolution. For example, if an image with 10000 x 10000 pixels is loaded with the image viewer having a screen resolution of 500 x 500 pixels, a down-sampled image with a resolution of 500 x 500 pixels (a down-sample factor of 20) will be generated first, then displayed on screen with GPU accelerations. As users zoom in the images, new down-sample factors will be recomputed at every sampled zoom level. Effectively, users will see that the image becomes sharper and sharper at higher and higher zoom levels. No down-sampling is applied until the image resolution in the view is lower than the screen resolution.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_imageViewer_downsample.mp4" type="video/mp4">
</video><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To make remote visualization of large images possible and efficient, CARTA adopts the above mentioned downsampling approach together with an efficient image compression algorithm. At rare circumstance, artifects may be seen on the images. A known issue is viewing an image with all pixels as zeros but one with a very high value. At low or default zoom level, some artifects will be observed around that pixel. At higher zoom levels, the artifects should dispear. CARTA has been tuned to localize the artifects within few screen pixels in order to minimize the impact of scientific analysis on such special cases. Should this become a problem in any kinds of analysis of yours, please contact <a class="reference external" href="mailto:carta_helpdesk&#37;&#52;&#48;asiaa&#46;sinica&#46;edu&#46;tw">carta_helpdesk</a> for help.</p>
</div>
</div>
<div class="section" id="render-configuration-of-a-raster-image">
<h3>Render configuration of a raster image<a class="headerlink" href="#render-configuration-of-a-raster-image" title="Permalink to this headline">¶</a></h3>
<p>The render configuration widget controls how a raster image is rendered in the image viewer. On the top, there is a row of buttons with different clip levels plus a custom button. Below there is a plot showing the per-channel histogram (logarithmic scale) with a bin count equals to the geometric mean of the image size (x and y). The two vertical red bars indicate the two clip values of a colormap. Interaction with a chart, like the histogram, is demostracted in the section <a class="reference internal" href="about_gui.html#mouse-interaction-with-charts"><span class="std std-ref">Mouse interactions with charts</span></a>. On the right, there is a column of options, such as histogram type, scaling function, color map, clip values, and control paramter of a scaling function (if applicable). Extra options to configure the histogram plot are hidden in the tool box on the right border. The histogram can be exported as a png image or a text file in tsv format.</p>
<p>By default, CARTA calculates per-channel histogram. When per-cube histogram is requested, a warning message and a progress widget will show up. Calculating a per-cube histogram can be time-consuming for large image cubes. Users may cancel the request at any time by pressing the cancel button in the progress widget.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_renderConfig_widget.mp4" type="video/mp4">
</video><p>By default, CARTA determines the boundary values of a colormap on <strong>per-channel</strong> basis. That is, a default “99.9%” clip level is applied to the per-channel histogram to look for the two clicp values. Then apply the values in “linear” scale to the default colormap “inferno” to render a raster image. This helps to inspect an image in detail without suffering from improper image rendering in most of cases. Below is an example of this per-channel rendering approach.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_renderConfig_perFrame.mp4" type="video/mp4">
</video><p>However, when comparing images channel by channel, color scales need to be fixed. This can be easily achieved by dragging the two vertical red bars, or typing in the values. When this happends, the “custom” button is enabled automatically and <em>all</em> frames will be rendered with the fixed boundary values. By clicking one of the clip buttons, CARTA switches back to the per-frame rendering mode <em>if per-channel histogram is requested</em>. Users may request the per-cube histogram to determine proper clip values. Below is an example of custom rendering with the per-cube histogram.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_renderConfig_perCustom.mp4" type="video/mp4">
</video><p>CARTA provides a set of scaling functions, such as:</p>
<ul class="simple">
<li>linear: <span class="math notranslate nohighlight">\(y = x\)</span></li>
<li>log: <span class="math notranslate nohighlight">\(y = {\log}_{\alpha}({\alpha}x+1)\)</span></li>
<li>square root: <span class="math notranslate nohighlight">\(y = {\sqrt{x}}\)</span></li>
<li>squared: <span class="math notranslate nohighlight">\(y = x^2\)</span></li>
<li>gamma: <span class="math notranslate nohighlight">\(y = x^{\gamma}\)</span></li>
<li>power: <span class="math notranslate nohighlight">\(y = ({\alpha}x-1)/{\alpha}\)</span></li>
</ul>
<p>A set of colormaps adopted from <a class="reference external" href="https://matplotlib.org/tutorials/colors/colormaps.html?highlight=colormap">matplotlib</a> is provided in CARTA.</p>
</div>
<div class="section" id="carta-image-viewing-performance">
<h3>CARTA image viewing performance<a class="headerlink" href="#carta-image-viewing-performance" title="Permalink to this headline">¶</a></h3>
<p>The per-frame rendering approach helps to improve the performance of loading an image significantly. Traditionally when an image is loaded, the minimum and maximum of the entire image (cube) are looked for. This becomes a serious performance issue if the image (cube) size is extraordinary large (&gt; several GB). In addition, applying the global minimum and maximum to render a raster image usually (if not often) results in a poorly rendered image if the dynamical range is high. Then users need to re-render the image repeatly with refined boundary values. Re-rendering such a large image repeatly further deduces user experiences.</p>
<p>CARTA hopes to improve the image viewing experience by adopting GPU rendering with web browser technology. In addtion, CARTA only renders an image with just enough image resolution (down-sampling). This combination results in a high-performance remote image viewer. The total file size is no longer a bottleneck. The determinitve factors are  1) image size in x and y dimensions, and 2) internet bandwidth, instead.</p>
</div>
<div class="section" id="changing-image-view">
<h3>Changing image view<a class="headerlink" href="#changing-image-view" title="Permalink to this headline">¶</a></h3>
<p>CARTA provides different ways to change the image view. With a mouse, image zoom or pan actions are achieved by scrolling up/down or clicking, respectively, as demostrated in the section <a class="reference internal" href="about_gui.html#mouse-interaction-with-images"><span class="std std-ref">Mouse interactions with images</span></a>. Alternatively, the image can be changed to fit the image viewer, or to fit the screen resolution (i.e., screen resolution equals full image resolution), by using the buttons at the bottom-right corner of the image viewer. Zoom in and zoom out buttons are provided as well.  To change to different frames, channels, or stokes, please refer to the section <a class="reference internal" href="#animator-intro"><span class="std std-ref">Animator</span></a>.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_imageViewer_changeView.mp4" type="video/mp4">
</video><p>When an image is zoomed in or out, the precison of the coordinate tick values is dynamically adjusted based on the zoom level. This feature allows users to analyze images with very differnet scales (WCS group; v1.2).</p>
</div>
<div class="section" id="cursor-information">
<h3>Cursor information<a class="headerlink" href="#cursor-information" title="Permalink to this headline">¶</a></h3>
<p>When the cursor is on the image viewer, pixel information at the cursor position is shown at the top side of the image. The information includes:</p>
<ul class="simple">
<li>World coordinate of the current coordinate system.</li>
<li>Image coordinate in pixel.</li>
<li>Pixel value.</li>
<li>Down-sample factor (if applicable).</li>
<li>Frequency, velocity, and reference frame (if applicable).</li>
</ul>
<img src="_static/carta_fn_imageViewer_cursorInfo.png"
     style="width:100%;height:auto;"><p>When the coordinate system is changed (e.g., ICRS to Galactic), the displayed world coordinate will be changed accordingly. The precison is determined dynamically based on the image header.</p>
<p>The reference image coordinate (0,0) locates at the center of the bottom-left pixel of the image. Regardless the displayed image is down-sampled or not, the image coordinate always refers to full resolution image.</p>
<p>When cursor is moving, the pixel value adopted from the down-sampled image is displayed. When the cursor stops moving by 200 ms, the pixel value will be updated to the pixel value at full image resolution.</p>
<p>If image header provides sufficient information in the frequency/velocity domain, the frequency and velocity with the reference frame of the current channel will be shown.</p>
</div>
<div class="section" id="configuring-an-image-plot">
<h3>Configuring an image plot<a class="headerlink" href="#configuring-an-image-plot" title="Permalink to this headline">¶</a></h3>
<p>CARTA provides flexible options to configure the appearance of an image plot. The overlay settings are accessible via <strong>View</strong> -&gt; <strong>Overlay</strong> -&gt; <strong>Customize</strong>.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_astOptions.mp4" type="video/mp4">
</video><p>As an example, below is an image with default overlay settings.</p>
<img src="_static/carta_fn_astOptions_before.png"
     style="width:100%;height:auto;"><p>And, this is a customized one. The coordinate system has been switched from FK5 to Galactic. Font type, size, and color are customized, as well as the axis border and grid lines.</p>
<img src="_static/carta_fn_astOptions_after.png"
     style="width:100%;height:auto;"><p>The restoring beam is shown at the bottom-left corner, if applicable.</p>
<p>The image can be exported as a png image by clicking the “Export image” button at the bottom-right corner of the image viewer, or by <strong>File</strong> -&gt; <strong>Export image</strong>.</p>
</div>
</div>
<div class="section" id="animator">
<span id="animator-intro"></span><h2>Animator<a class="headerlink" href="#animator" title="Permalink to this headline">¶</a></h2>
<p>The animator widget provides controls of image frames, channels, and stokes. When multiple images are loaded via <strong>File</strong> -&gt; <strong>Append image</strong>, “Frame” slide bar will show up and allows users to switch between different loaded images. If an image file has multiple channels or stokes, “Channel” or “Stokes” slide bars will appear. On the top there is a set of animation control buttons such play, stop, next, etc. The action will be applied to the slide bar with the activated radio button. As an example below, the action will be applied to the <em>channel</em> axis of the second stokes axis of the third image file.</p>
<img src="_static/carta_fn_animator_widget.png"
     style="width:100%;height:auto;"><p>The frame rate spin box controls the <em>desired</em> frame per second (fps). The <em>actual</em> frame rate depends on image size and internet condition. The “Req” index will display the requested frame index, while the “Current” index will display the actually displayed index in the image viewer. When the “play” button is triggered, the “Req” index will keep the number of the delayed frames to be comparable to the desired fps, if the image is large and/or the internet condition is poor.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_animator_delayedFrame.mp4" type="video/mp4">
</video><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More animator features, such as playback modes (backward, bouncing), playback range and step, etc. will be available in future releases.</p>
</div>
</div>
<div class="section" id="spatial-profiler">
<h2>Spatial profiler<a class="headerlink" href="#spatial-profiler" title="Permalink to this headline">¶</a></h2>
<p>Spatial profiler provides the spatial profiles of the current image at the cursor position. When the cursor is moving on the image, instant profiles dervied from the (down-sampled) raster image are displayed. When the cursor stops moving for more than 200 ms, profiles derived from the full resolution image will be displayed instead. This allows users to inspect the image in an efficient way. The “F” key will disable and enable profile update. A marker “+” will be placed on the image to indicate the position of the profiles taken.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_spatialProfiler_demo.mp4" type="video/mp4">
</video><p>The interactions of the spatial profiler widget are demostracted in the section <a class="reference internal" href="about_gui.html#mouse-interaction-with-charts"><span class="std std-ref">Mouse interactions with charts</span></a>. The red vertical bar indicates the pixel where the profile is taken. The bottom axis shows the image coordinate, while optional world coordinate is displayed on the top axis. Extra options to configure the profile plot are available to the right border. The option “Show Mean/RMS” will adopt the data in the current view to derive a mean value and an rms value, and visualize the results on the plot. The profile can be exported as a png image or a text file in tsv format via the buttons at the bottom-right corner.</p>
<img src="_static/carta_fn_spatialProfiler_widget.png"
     style="width:100%;height:auto;"><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More flexibilities on how mean and rms values are derived will be provided in future releases. Profile fitting capability will be available in future release.</p>
</div>
</div>
<div class="section" id="spectral-profiler">
<h2>Spectral profiler<a class="headerlink" href="#spectral-profiler" title="Permalink to this headline">¶</a></h2>
<p>Spectral profiler provides the spectral profile of the current image cube at the cursor position. When the cursor stops moving for more than 200 ms, a spectral profile derived at the cursor position from the full resolution image cube will be displayed. The “F” key will disable and enable profile update. A marker “+” will be placed on the image to indicate the position of the profiles taken.</p>
<video controls loop style="width:100%;height:auto;">
  <source src="_static/carta_fn_spectralProfiler_demo.mp4" type="video/mp4">
</video><p>The interactions of the spectral profiler widget are demostracted in the section <a class="reference internal" href="about_gui.html#mouse-interaction-with-charts"><span class="std std-ref">Mouse interactions with charts</span></a>. The red vertical bar indicates the channel of the image displayed in the image viewer. The bottom axis shows the spectral coordinate, while optional channel coordinate can be displayed instead. Extra options to configure the profile plot are available to the right border. The option “Show Mean/RMS” will adopt the data in the current view to derive a mean value and an rms value, and visualize the results on the plot. The profile can be exported as a png image or a text file in tsv format via the buttons at the bottom-right corner.</p>
<img src="_static/carta_fn_spectralProfiler_widget.png"
     style="width:100%;height:auto;"><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Approximated spectral profile while cursor is moving (like spatial profiler) will be provided in future releases. More flexibilities on how mean and rms values are derived will be provided in future releases. Profile fitting capability will be available in future release.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="appendix_a_uninstallation.html" title="Appendix A: uninstallation"
             >next</a> |</li>
        <li class="right" >
          <a href="about_gui.html" title="Graphical user interface"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CARTA 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, CARTA working group.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.
    </div>
  </body>
</html>